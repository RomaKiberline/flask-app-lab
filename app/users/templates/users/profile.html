{% extends "base.html" %}

{% block title %}–ü—Ä–æ—Ñ—ñ–ª—å - {{ username }}{% endblock %}

{% block body_attrs %}
{% if color_scheme == 'light' %}
class="light-theme"
{% elif color_scheme == 'dark' %}
class="dark-theme"
{% endif %}
{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <h1>–í—ñ—Ç–∞—î–º–æ, {{ username }}!</h1>
        <p>–í–∏ —É—Å–ø—ñ—à–Ω–æ —É–≤—ñ–π—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É</p>
        <a href="{{ url_for('users.logout') }}" class="btn btn-danger" style="display: inline-block; margin-top: 1rem;">–í–∏–π—Ç–∏</a>
    </div>

    <!-- –°–µ–∫—Ü—ñ—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è cookies -->
    <div class="profile-section">
        <h3>üìù –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è Cookies</h3>
        
        <form method="POST" action="{{ url_for('users.add_cookie') }}" class="cookie-form">
            <div>
                <label for="key" style="display: block; margin-bottom: 0.3rem; font-weight: 600; color: #667eea;">–ö–ª—é—á:</label>
                <input type="text" id="key" name="key" placeholder="–ö–ª—é—á" required>
            </div>
            <div>
                <label for="value" style="display: block; margin-bottom: 0.3rem; font-weight: 600; color: #667eea;">–ó–Ω–∞—á–µ–Ω–Ω—è:</label>
                <input type="text" id="value" name="value" placeholder="–ó–Ω–∞—á–µ–Ω–Ω—è" required>
            </div>
            <div>
                <label for="max_age" style="display: block; margin-bottom: 0.3rem; font-weight: 600; color: #667eea;">–¢–µ—Ä–º—ñ–Ω (—Å–µ–∫):</label>
                <input type="number" id="max_age" name="max_age" placeholder="–¢–µ—Ä–º—ñ–Ω –¥—ñ—ó (—Å–µ–∫)" min="0">
            </div>
            <button type="submit" class="btn-submit">–î–æ–¥–∞—Ç–∏ Cookie</button>
        </form>

        <div style="margin-top: 1rem;">
            <a href="{{ url_for('users.delete_all_cookies') }}" 
               class="btn btn-danger btn-small"
               onclick="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ cookies?')">
                –í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ Cookies
            </a>
        </div>

        <h4 style="margin-top: 1.5rem; color: #667eea;">–ü–æ—Ç–æ—á–Ω—ñ Cookies:</h4>
        {% if cookies %}
        <table class="cookie-table">
            <thead>
                <tr>
                    <th>–ö–ª—é—á</th>
                    <th>–ó–Ω–∞—á–µ–Ω–Ω—è</th>
                    <th>–î—ñ—ó</th>
                </tr>
            </thead>
            <tbody>
                {% for key, value in cookies.items() %}
                <tr>
                    <td><strong>{{ key }}</strong></td>
                    <td>{{ value }}</td>
                    <td>
                        <a href="{{ url_for('users.delete_cookie', key=key) }}" 
                           class="btn btn-danger btn-small"
                           onclick="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏ cookie \'{{ key }}\'?')">
                            –í–∏–¥–∞–ª–∏—Ç–∏
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p style="color: #666; font-style: italic;">–ù–µ–º–∞—î –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö cookies</p>
        {% endif %}
    </div>

    <!-- –°–µ–∫—Ü—ñ—è –≤–∏–±–æ—Ä—É –∫–æ–ª—å–æ—Ä–æ–≤–æ—ó —Å—Ö–µ–º–∏ -->
    <div class="profile-section">
        <h3>üé® –ö–æ–ª—å–æ—Ä–æ–≤–∞ —Å—Ö–µ–º–∞</h3>
        <p style="margin-bottom: 1rem; color: #666;">
            –ü–æ—Ç–æ—á–Ω–∞ —Å—Ö–µ–º–∞: <strong>{{ color_scheme }}</strong>
        </p>
        
        <div class="color-scheme-buttons">
            <a href="{{ url_for('users.set_color_scheme', scheme='default') }}" 
               class="btn btn-primary">
                –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞
            </a>
            <a href="{{ url_for('users.set_color_scheme', scheme='light') }}" 
               class="btn btn-secondary" 
               style="background: #f5f7fa; color: #333; border: 2px solid #667eea;">
                –°–≤—ñ—Ç–ª–∞
            </a>
            <a href="{{ url_for('users.set_color_scheme', scheme='dark') }}" 
               class="btn btn-secondary" 
               style="background: #2c3e50; color: #ecf0f1;">
                –¢–µ–º–Ω–∞
            </a>
        </div>
    </div>

    <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∞ —Å–µ–∫—Ü—ñ—è -->
    <div class="profile-section">
        <h3>‚ÑπÔ∏è –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å–µ—Å—ñ—é</h3>
        <p style="color: #666;">
            –í–∞—à–µ —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤ —Å–µ—Å—ñ—ó. –í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–π—Ç–∏ –∑ —Å–∏—Å—Ç–µ–º–∏, –Ω–∞—Ç–∏—Å–Ω—É–≤—à–∏ –∫–Ω–æ–ø–∫—É "–í–∏–π—Ç–∏" –≤–≥–æ—Ä—ñ.
        </p>
    </div>
</div>
{% endblock %}
